{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Subscription}"
        ],
        "parameters": [
          {
            "id": "0ba0f6eb-f84e-497f-b429-2f1e2159692e",
            "version": "KqlParameterItem/1.0",
            "name": "Subscription",
            "label": "Subscriptions",
            "type": 6,
            "isRequired": true,
            "isGlobal": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "includeAll": false,
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "defaultValue": "value::all",
            "value": [
              "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386"
            ]
          },
          {
            "id": "29a382f7-6437-4b30-b1ab-8dd0e6c12799",
            "version": "KqlParameterItem/1.0",
            "name": "ResourceGroups",
            "label": "Resource Groups",
            "type": 2,
            "isRequired": true,
            "isGlobal": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "Resources\r\n| summarize by resourceGroup\r\n| order by resourceGroup asc\r\n| project id=resourceGroup, resourceGroup",
            "crossComponentResources": [
              "{Subscription}"
            ],
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "selectAllValue": "",
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "defaultValue": "value::all",
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources",
            "value": [
              "value::all"
            ]
          }
        ],
        "style": "above",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources"
      },
      "name": "Subscriptions Parameters"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources\r\n| where type == \"microsoft.web/sites\"\r\n| where resourceGroup in ({ResourceGroups})\r\n| extend state = tolower(properties.state)\r\n| extend status = case(\r\nstate == 'stopped',\r\n'Stopped',\r\nstate == 'running',\r\n'Running',\r\n'Other')\r\n| summarize count() by status\r\n",
        "size": 1,
        "title": "App Sevices",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscription}"
        ],
        "visualization": "piechart",
        "graphSettings": {
          "type": 0
        },
        "chartSettings": {
          "showMetrics": false,
          "showLegend": true,
          "seriesLabelSettings": [
            {
              "seriesName": "Running",
              "color": "green"
            },
            {
              "seriesName": "Stopped",
              "color": "redBright"
            },
            {
              "seriesName": "Other",
              "color": "orange"
            }
          ]
        }
      },
      "customWidth": "25",
      "name": "WebApp Pie",
      "styleSettings": {
        "maxWidth": "10",
        "showBorder": true
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources\r\n| where type == \"microsoft.web/serverfarms\"\r\n| where resourceGroup in ({ResourceGroups})\r\n| extend state = tostring(properties.status)\r\n| summarize count() by state\r\n",
        "size": 1,
        "title": "App Service Plans",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscription}"
        ],
        "visualization": "piechart",
        "chartSettings": {
          "showMetrics": false,
          "showLegend": true,
          "seriesLabelSettings": [
            {
              "seriesName": "Ready",
              "color": "blueDark"
            },
            {
              "seriesName": "Creating",
              "color": "blue"
            },
            {
              "seriesName": "Pending",
              "color": "yellow"
            }
          ]
        }
      },
      "customWidth": "25",
      "name": "WebApp Plan Pie",
      "styleSettings": {
        "maxWidth": "10",
        "showBorder": true
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type == \"microsoft.network/trafficmanagerprofiles\"\r\n| where tags['global-project'] =~ 'APEUCZ054'\r\n| where tags['global-env'] =~ 'PR'\r\n| extend profileStatus=properties.profileStatus\r\n| extend monitorStatus=properties.monitorConfig.profileMonitorStatus\r\n| mv-expand headers=properties.monitorConfig.customHeaders\r\n| join kind=leftouter (resources\r\n| where type == \"microsoft.network/trafficmanagerprofiles\"\r\n| where tags['global-project'] =~ 'APEUCZ054'\r\n| where tags['global-env'] =~ 'PR'\r\n| mv-expand endpoints=properties.endpoints\r\n| extend endpointready=case(tostring(endpoints.properties.endpointMonitorStatus) == \"Online\", 1,0)\r\n| summarize endpointCount=count() , endpointsOnline= sum(endpointready) by name) on name\r\n| project name, type='trafficmanagerprofile',profileStatus, monitorStatus, target=headers.value, endpointCount,endpointsOnline\r\n| union kind=outer ( resources\r\n| where type == \"microsoft.network/trafficmanagerprofiles\"\r\n| where tags['global-project'] =~ 'APEUCZ054'\r\n| where tags['global-env'] =~ 'PR'\r\n| mv-expand endpoints=properties.endpoints\r\n| extend endpointsOnline=case(tostring(endpoints.properties.endpointMonitorStatus) == \"Online\", 1,0)\r\n| project name=tostring(endpoints.name),parrentId=name, type='trafficmanagerendpoint',endpointCount=1,endpointsOnline,target=endpoints.properties.target ,monitorStatus=endpoints.properties.endpointMonitorStatus)\r\n| project name, target,type,parrentId, profileStatus, monitorStatus, availability=100*endpointsOnline/endpointCount\r\n",
        "size": 1,
        "title": "Traffic Manager Availability",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "availability",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "1000",
                    "representation": "Available",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "success",
                    "text": "{0}{1}"
                  }
                ]
              }
            }
          ]
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "name",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "availability",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": false,
          "sortCriteriaField": "name",
          "size": "auto"
        },
        "chartSettings": {
          "yAxis": [
            "availability"
          ]
        }
      },
      "customWidth": "50",
      "name": "Traffic Manager",
      "styleSettings": {
        "maxWidth": "20",
        "showBorder": true
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"AzureHealthQuery/1.0\",\"queryType\":\"Detailed\"}",
        "size": 0,
        "title": "LogAnalytics availability",
        "queryType": 4,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.OperationalInsights/workspaces/zaasplexplexpraew1law01",
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-cee-bckp-pra-ew1-rgp01/providers/Microsoft.OperationalInsights/workspaces/z-aas-cee-bckp-pra-ew1-law01",
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-log-plex-pra-ew1-rgp01/providers/Microsoft.OperationalInsights/workspaces/z-aas-log-plex-pra-ew1-law01",
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.OperationalInsights/workspaces/zaasplexplexppaew1law01"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Availability state",
              "formatter": 11
            },
            {
              "columnMatch": "Reported time",
              "formatter": 5
            },
            {
              "columnMatch": "Summary",
              "formatter": 5
            },
            {
              "columnMatch": "Resource group",
              "formatter": 5
            }
          ]
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "Name",
            "formatter": 13,
            "formatOptions": {
              "linkTarget": null,
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Availability state",
            "formatter": 18,
            "formatOptions": {
              "thresholdsOptions": "icons",
              "thresholdsGrid": [
                {
                  "operator": "!=",
                  "thresholdValue": "Available",
                  "representation": "warning",
                  "text": "{0}{1}"
                },
                {
                  "operator": "==",
                  "thresholdValue": "Available",
                  "representation": "success",
                  "text": "100"
                },
                {
                  "operator": "Default",
                  "thresholdValue": null,
                  "representation": "success",
                  "text": "100"
                }
              ]
            },
            "numberFormat": {
              "unit": 0,
              "options": {
                "style": "decimal"
              }
            }
          },
          "showBorder": false,
          "sortOrderField": 1,
          "size": "auto"
        },
        "chartSettings": {
          "seriesLabelSettings": [
            {
              "seriesName": "Available",
              "color": "greenDark"
            }
          ]
        }
      },
      "customWidth": "40",
      "name": "LogAnalytics availability",
      "styleSettings": {
        "margin": "0",
        "maxWidth": "50",
        "showBorder": true
      }
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbookec7cd1f4-baf2-47a4-a6ed-05e44804f2c3",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": -1,
        "resourceType": "microsoft.storage/storageaccounts",
        "metricScope": 0,
        "resourceIds": [
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Storage/storageAccounts/zaasplexplexpraew1sto01",
          "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp02/providers/Microsoft.Storage/storageAccounts/zaasplexplexppaew1sto02",
          "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Storage/storageAccounts/zaasplexplexdvaew1sto01",
          "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-cee-bckp-ppa-ew1-rgp01/providers/Microsoft.Storage/storageAccounts/zaasceebckpppaew1sto01",
          "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Storage/storageAccounts/zaasplexplexppaew1sto01",
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-cee-bckp-pra-ew1-rgp01/providers/Microsoft.Storage/storageAccounts/zaasceebckppraew1sto01"
        ],
        "timeContext": {
          "durationMs": 3600000
        },
        "metrics": [
          {
            "namespace": "microsoft.storage/storageaccounts",
            "metric": "microsoft.storage/storageaccounts-Transaction-Availability",
            "aggregation": 4
          }
        ],
        "title": "Storages account availability",
        "gridFormatType": 1,
        "tileSettings": {
          "titleContent": {
            "columnMatch": "Name",
            "formatter": 13,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Value",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": false,
          "sortCriteriaField": "Name",
          "size": "auto"
        },
        "mapSettings": {
          "locInfo": "AzureResource",
          "sizeSettings": "Value",
          "sizeAggregation": "Sum",
          "legendMetric": "Value",
          "legendAggregation": "Sum",
          "itemColorSettings": {
            "type": "heatmap",
            "colorAggregation": "Sum",
            "nodeColorField": "Value",
            "heatmapPalette": "greenRed"
          },
          "locInfoColumn": "Name"
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "Subscription",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Value",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        },
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Subscription",
              "formatter": 5
            },
            {
              "columnMatch": "Name",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource"
              }
            },
            {
              "columnMatch": "microsoft.storage/storageaccounts-Transaction-Availability Timeline",
              "formatter": 5
            },
            {
              "columnMatch": "microsoft.storage/storageaccounts-Transaction-Availability",
              "formatter": 1,
              "numberFormat": {
                "unit": 1,
                "options": null
              }
            },
            {
              "columnMatch": "Metric",
              "formatter": 1
            },
            {
              "columnMatch": "Aggregation",
              "formatter": 5
            },
            {
              "columnMatch": "Value",
              "formatter": 1
            },
            {
              "columnMatch": "Timeline",
              "formatter": 9
            }
          ],
          "rowLimit": 10000
        }
      },
      "customWidth": "40",
      "name": "Storages account availability",
      "styleSettings": {
        "margin": "0",
        "maxWidth": "50",
        "showBorder": true
      }
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbookdf867ba4-435f-4807-b91a-72c3923cb062",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": -1,
        "resourceType": "microsoft.keyvault/vaults",
        "metricScope": 0,
        "resourceIds": [
          "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-log-plex-pra-ew1-rgp01/providers/Microsoft.KeyVault/vaults/zaaslogplexpraew1key01",
          "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-log-plex-ppa-ew1-rgp01/providers/Microsoft.KeyVault/vaults/zaaslogplexppaew1key01",
          "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-log-plex-dva-ew1-rgp01/providers/Microsoft.KeyVault/vaults/zaaslogplexdvaew1key02"
        ],
        "timeContext": {
          "durationMs": 3600000
        },
        "metrics": [
          {
            "namespace": "microsoft.keyvault/vaults",
            "metric": "microsoft.keyvault/vaults--Availability",
            "aggregation": 4
          }
        ],
        "title": "KeyVaults availability",
        "gridFormatType": 1,
        "tileSettings": {
          "showBorder": false,
          "titleContent": {
            "columnMatch": "Name",
            "formatter": 13
          },
          "leftContent": {
            "columnMatch": "Value",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        },
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Subscription",
              "formatter": 5
            },
            {
              "columnMatch": "Name",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource"
              }
            },
            {
              "columnMatch": "microsoft.keyvault/vaults--Availability Timeline",
              "formatter": 5
            },
            {
              "columnMatch": "microsoft.keyvault/vaults--Availability",
              "formatter": 1,
              "numberFormat": {
                "unit": 1,
                "options": null
              }
            }
          ],
          "rowLimit": 10000,
          "labelSettings": [
            {
              "columnId": "microsoft.keyvault/vaults--Availability",
              "label": "Overall Vault Availability (Average)"
            },
            {
              "columnId": "microsoft.keyvault/vaults--Availability Timeline",
              "label": "Overall Vault Availability (Average) Timeline"
            }
          ]
        },
        "sortBy": []
      },
      "customWidth": "20",
      "name": "KeyVaults availability",
      "styleSettings": {
        "margin": "0",
        "maxWidth": "50",
        "showBorder": true
      }
    },
    {
      "type": 1,
      "content": {
        "json": "![Diagram](https://raw.githubusercontent.com/dapl-code/webapptest/refs/heads/main/Adiagram.png)"
      },
      "customWidth": "93",
      "name": "Diagram"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type == \"microsoft.web/sites\"\r\n| where resourceGroup in ({ResourceGroups})\r\n//| mv-expand tags\r\n| extend ParentResource = tostring(parse_json(tags).[\"parent-resource\"])\r\n| extend ParentResource = split(ParentResource, \",\")\r\n| mv-expand ParentResource\r\n| extend ComponentCode = tostring(parse_json(tags).[\"component-code\"])\r\n| extend ParentResource=tostring(ParentResource)\r\n//| project id, name, ParentResource, ComponentCode\r\n| union (\r\nresources\r\n| where type != \"microsoft.web/sites\"\r\n//| mv-expand tags\r\n| extend ParentResource = tostring(parse_json(tags).[\"parent-resource\"])\r\n| where isnotempty(ParentResource)\r\n| extend ParentResource = split(ParentResource, \",\")\r\n| mv-expand ParentResource\r\n| extend ParentResource=tostring(ParentResource)\r\n| join kind=inner (\r\n//| join kind = leftouter (\r\nresources\r\n| where type == \"microsoft.web/sites\"\r\n| where resourceGroup in ({ResourceGroups})\r\n| project ParentResourceName=name,ParentResourceResourceGroup=resourceGroup,ParentResourceSubscriptionId=subscriptionId\r\n) on $left.ParentResource==$right.ParentResourceName\r\n)\r\n| extend \r\n    state = tostring(properties.state),\r\n    status = tostring(properties.status),\r\n    provisioningState = tostring(properties.provisioningState),\r\n    overallState = iff(isnotempty(properties.state) or isnotempty(properties.provisioningState) or isnotempty(properties.status),\r\n                       iff(properties.state == \"Disabled\" or properties.status == \"Stopped\" or properties.provisioningState == \"Disabled\", \"0\", \"1\"), \"\")\r\n| extend Order = iff(isnotempty(ParentResource), strcat(ParentResource,\"-2-\", id), strcat(name, \"-1-\", id))\r\n| order by Order asc\r\n\r\n\r\n                       ",
        "size": 0,
        "title": "data",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "visualization": "table",
        "gridSettings": {
          "sortBy": [
            {
              "itemKey": "ParentResource",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "ParentResource",
            "sortOrder": 2
          }
        ]
      },
      "customWidth": "1",
      "name": "Webapp tree"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"fedf344d-1176-4c4e-af84-8be97e35416a\",\"mergeType\":\"leftouter\",\"leftTable\":\"Webapp tree\",\"rightTable\":\"KeyVaults availability\",\"leftColumn\":\"id\",\"rightColumn\":\"Name\"},{\"id\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\",\"mergeType\":\"leftouter\",\"leftTable\":\"Webapp tree\",\"rightTable\":\"Storages account availability\",\"leftColumn\":\"id\",\"rightColumn\":\"Name\"},{\"id\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\",\"mergeType\":\"leftouter\",\"leftTable\":\"Webapp tree\",\"rightTable\":\"LogAnalytics availability\",\"leftColumn\":\"id\",\"rightColumn\":\"Name\"}],\"projectRename\":[{\"originalName\":\"[Webapp tree].ComponentCode\",\"mergedName\":\"ComponentCode\",\"fromId\":\"unknown\"},{\"originalName\":\"[Webapp tree].id\",\"mergedName\":\"id\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].ParentResource\",\"mergedName\":\"ParentResource\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Added column]\",\"mergedName\":\"overall\",\"fromId\":null,\"isNewItem\":true,\"newItemData\":[{\"criteriaContext\":{\"leftOperand\":\"Value\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"100\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"Value1\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"100\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"status\",\"operator\":\"regex\",\"rightValType\":\"static\",\"rightVal\":\"(Ready|Online)\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"state\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"Running\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"Availability state\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"Available\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"overallState\",\"operator\":\"is Empty\",\"rightValType\":\"static\",\"resultValType\":\"static\",\"resultVal\":\"2\"}},{\"criteriaContext\":{\"leftOperand\":\"provisioningState\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"Succeeded\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"state\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"Ready\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"column\",\"resultValType\":\"static\",\"resultVal\":\"0\"}}]},{\"originalName\":\"[Added column]\",\"mergedName\":\"state detail\",\"fromId\":null,\"isNewItem\":true,\"newItemData\":[{\"criteriaContext\":{\"leftOperand\":\"Value\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"100\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"Value1\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"100\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"status\",\"operator\":\"regex\",\"rightValType\":\"static\",\"rightVal\":\"(Ready|Online)\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"state\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"Running\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"Availability state\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"Available\",\"resultValType\":\"static\",\"resultVal\":\"1\"}},{\"criteriaContext\":{\"leftOperand\":\"overallState\",\"operator\":\"is Empty\",\"rightValType\":\"column\",\"resultValType\":\"column\",\"resultVal\":\"overallState\"}},{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"column\",\"resultValType\":\"static\",\"resultVal\":\"0\"}}]},{\"originalName\":\"[Webapp tree].state\",\"mergedName\":\"state\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].status\",\"mergedName\":\"status\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Value\",\"mergedName\":\"Value\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].provisioningState\",\"mergedName\":\"provisioningState\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].ParentResourceName\",\"mergedName\":\"ParentResourceName\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].ParentResourceSubscriptionId\",\"mergedName\":\"ParentResourceSubscriptionId\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].name\",\"mergedName\":\"name\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].type\",\"mergedName\":\"type\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].Order\",\"mergedName\":\"Order\",\"fromId\":\"unknown\"},{\"originalName\":\"[Webapp tree].tenantId\",\"mergedName\":\"tenantId\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].kind\",\"mergedName\":\"kind\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].location\",\"mergedName\":\"location\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].resourceGroup\",\"mergedName\":\"resourceGroup\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].subscriptionId\",\"mergedName\":\"subscriptionId\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].managedBy\",\"mergedName\":\"managedBy\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].apiVersion\",\"mergedName\":\"apiVersion\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].sku\",\"mergedName\":\"sku\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].plan\",\"mergedName\":\"plan\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].properties\",\"mergedName\":\"properties\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].tags\",\"mergedName\":\"tags\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].identity\",\"mergedName\":\"identity\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].zones\",\"mergedName\":\"zones\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].extendedLocation\",\"mergedName\":\"extendedLocation\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].systemData\",\"mergedName\":\"systemData\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].ParentResourceResourceGroup\",\"mergedName\":\"ParentResourceResourceGroup\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].overallState\",\"mergedName\":\"overallState\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Name\",\"mergedName\":\"Name\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Namespace\",\"mergedName\":\"Namespace\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Metric\",\"mergedName\":\"Metric\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Metric ID\",\"mergedName\":\"Metric ID\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Aggregation\",\"mergedName\":\"Aggregation\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Segment Field\",\"mergedName\":\"Segment Field\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Segment\",\"mergedName\":\"Segment\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[KeyVaults availability].Timeline\",\"mergedName\":\"Timeline\",\"fromId\":\"fedf344d-1176-4c4e-af84-8be97e35416a\"},{\"originalName\":\"[Webapp tree].ParentResource_string\",\"mergedName\":\"ParentResource_string\",\"fromId\":\"unknown\"},{\"originalName\":\"[Webapp tree].ParentResource_dynamic\",\"mergedName\":\"ParentResource_dynamic\",\"fromId\":\"unknown\"},{\"originalName\":\"[Webapp tree].ParentResource1\",\"mergedName\":\"ParentResource1\",\"fromId\":\"unknown\"},{\"originalName\":\"[Webapp tree].ParentResource2\",\"mergedName\":\"ParentResource2\",\"fromId\":\"unknown\"},{\"originalName\":\"[Storages account availability].Subscription\",\"mergedName\":\"Subscription1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Name\",\"mergedName\":\"Name1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Namespace\",\"mergedName\":\"Namespace1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Metric\",\"mergedName\":\"Metric1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Metric ID\",\"mergedName\":\"Metric ID1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Aggregation\",\"mergedName\":\"Aggregation1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Segment Field\",\"mergedName\":\"Segment Field1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Segment\",\"mergedName\":\"Segment1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Value\",\"mergedName\":\"Value1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].Timeline\",\"mergedName\":\"Timeline1\",\"fromId\":\"a7ed9829-c5ea-4732-968d-b0dce938a067\"},{\"originalName\":\"[Storages account availability].microsoft.storage/storageaccounts-Transaction-Availability\",\"mergedName\":\"microsoft.storage/storageaccounts-Transaction-Availability\",\"fromId\":\"unknown\"},{\"originalName\":\"[Storages account availability].microsoft.storage/storageaccounts-Transaction-Availability Timeline\",\"mergedName\":\"microsoft.storage/storageaccounts-Transaction-Availability Timeline\",\"fromId\":\"unknown\"},{\"originalName\":\"[LogAnalytics availability].Name\",\"mergedName\":\"Name2\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Availability state\",\"mergedName\":\"Availability state\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Detailed status\",\"mergedName\":\"Detailed status\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Occurred time\",\"mergedName\":\"Occurred time\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Reason chronicity\",\"mergedName\":\"Reason chronicity\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Reason type\",\"mergedName\":\"Reason type\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Reported time\",\"mergedName\":\"Reported time\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Summary\",\"mergedName\":\"Summary\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Title\",\"mergedName\":\"Title\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Resource group\",\"mergedName\":\"Resource group\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"},{\"originalName\":\"[LogAnalytics availability].Subscription\",\"mergedName\":\"Subscription2\",\"fromId\":\"75d89a4c-5a66-45ae-9cee-25fdca69b0ce\"}]}",
        "size": 0,
        "title": "OverAll Availability",
        "queryType": 7,
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "id",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "42.284ch"
              }
            },
            {
              "columnMatch": "ParentResource",
              "formatter": 5
            },
            {
              "columnMatch": "overall",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "1",
                    "representation": "success",
                    "text": ""
                  },
                  {
                    "operator": "==",
                    "thresholdValue": "0",
                    "representation": "2",
                    "text": "[\"state\"], [\"status\"] [\"provisioningState\"]"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "more",
                    "text": ""
                  }
                ],
                "aggregation": "Min",
                "customColumnWidthSetting": "23.7133ch"
              }
            },
            {
              "columnMatch": "state detail",
              "formatter": 7,
              "formatOptions": {
                "linkColumn": "state",
                "linkTarget": "GenericDetails",
                "linkLabel": "detail",
                "linkIsContextBlade": true,
                "appInsightsContext": {
                  "resourceIdSource": "default",
                  "secondaryIdSource": "default"
                }
              }
            },
            {
              "columnMatch": "state",
              "formatter": 5
            },
            {
              "columnMatch": "status",
              "formatter": 5
            },
            {
              "columnMatch": "Value",
              "formatter": 5
            },
            {
              "columnMatch": "provisioningState",
              "formatter": 5
            },
            {
              "columnMatch": "ParentResourceName",
              "formatter": 5
            },
            {
              "columnMatch": "ParentResourceSubscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "name",
              "formatter": 5
            },
            {
              "columnMatch": "Order",
              "formatter": 0,
              "formatOptions": {
                "aggregation": "Sum",
                "customColumnWidthSetting": "0.3249ch"
              }
            },
            {
              "columnMatch": "tenantId",
              "formatter": 5
            },
            {
              "columnMatch": "kind",
              "formatter": 5
            },
            {
              "columnMatch": "location",
              "formatter": 5
            },
            {
              "columnMatch": "resourceGroup",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "managedBy",
              "formatter": 5
            },
            {
              "columnMatch": "apiVersion",
              "formatter": 5
            },
            {
              "columnMatch": "sku",
              "formatter": 5
            },
            {
              "columnMatch": "plan",
              "formatter": 5
            },
            {
              "columnMatch": "properties",
              "formatter": 5
            },
            {
              "columnMatch": "tags",
              "formatter": 5
            },
            {
              "columnMatch": "identity",
              "formatter": 5
            },
            {
              "columnMatch": "zones",
              "formatter": 5
            },
            {
              "columnMatch": "extendedLocation",
              "formatter": 5
            },
            {
              "columnMatch": "systemData",
              "formatter": 5
            },
            {
              "columnMatch": "ParentResourceResourceGroup",
              "formatter": 5
            },
            {
              "columnMatch": "overallState",
              "formatter": 5
            },
            {
              "columnMatch": "Subscription",
              "formatter": 5
            },
            {
              "columnMatch": "Name",
              "formatter": 5
            },
            {
              "columnMatch": "Metric",
              "formatter": 5
            },
            {
              "columnMatch": "Metric ID",
              "formatter": 5
            },
            {
              "columnMatch": "Aggregation",
              "formatter": 5
            },
            {
              "columnMatch": "Segment",
              "formatter": 5
            },
            {
              "columnMatch": "Timeline",
              "formatter": 5
            },
            {
              "columnMatch": "Value1",
              "formatter": 5
            },
            {
              "columnMatch": "Timeline1",
              "formatter": 5
            },
            {
              "columnMatch": "Availability state",
              "formatter": 5
            },
            {
              "columnMatch": "Detailed status",
              "formatter": 5
            },
            {
              "columnMatch": "Occurred time",
              "formatter": 5
            },
            {
              "columnMatch": "Reason chronicity",
              "formatter": 5
            },
            {
              "columnMatch": "Reason type",
              "formatter": 5
            },
            {
              "columnMatch": "Reported time",
              "formatter": 5
            },
            {
              "columnMatch": "Summary",
              "formatter": 5
            },
            {
              "columnMatch": "Title",
              "formatter": 5
            },
            {
              "columnMatch": "Resource group",
              "formatter": 5
            },
            {
              "columnMatch": "Availability (Average)",
              "formatter": 5
            },
            {
              "columnMatch": "Overall Vault Availability (Average)",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "sourceColumn": "Overall Vault Availability (Average) Timeline",
                    "operator": "==",
                    "thresholdValue": "0-99",
                    "representation": "2"
                  },
                  {
                    "operator": "==",
                    "thresholdValue": "100",
                    "representation": "success"
                  },
                  {
                    "sourceColumn": "Overall Vault Availability (Average) Timeline",
                    "operator": "is Empty"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Blank",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "OverAll Status",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "1",
                    "representation": "success",
                    "text": ""
                  },
                  {
                    "operator": "!=",
                    "thresholdValue": "1",
                    "representation": "2",
                    "text": ""
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Unknown",
                    "text": ""
                  }
                ],
                "aggregation": "Min"
              }
            },
            {
              "columnMatch": "id1",
              "formatter": 5,
              "formatOptions": {
                "customColumnWidthSetting": "42.284ch"
              }
            },
            {
              "columnMatch": "identity1",
              "formatter": 5,
              "formatOptions": {
                "customColumnWidthSetting": "42.284ch"
              }
            },
            {
              "columnMatch": "Availability Timeline",
              "formatter": 5
            }
          ],
          "sortBy": [
            {
              "itemKey": "Order",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "Order",
            "sortOrder": 1
          }
        ]
      },
      "name": "Union WebApp, Stoarge, KeyVault, Log analytics"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\",\"mergeType\":\"table\",\"leftTable\":\"Union WebApp, Stoarge, KeyVault, Log analytics\"}],\"projectRename\":[{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].ComponentCode\",\"mergedName\":\"ComponentCode\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].id\",\"mergedName\":\"id\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].ParentResource\",\"mergedName\":\"ParentResource\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].overall\",\"mergedName\":\"overall\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].state detail\",\"mergedName\":\"state detail\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].state\",\"mergedName\":\"state\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].status\",\"mergedName\":\"status\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Value\",\"mergedName\":\"Value\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].provisioningState\",\"mergedName\":\"provisioningState\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].ParentResourceName\",\"mergedName\":\"ParentResourceName\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].ParentResourceSubscriptionId\",\"mergedName\":\"ParentResourceSubscriptionId\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].name\",\"mergedName\":\"name\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].type\",\"mergedName\":\"type\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Order\",\"mergedName\":\"Order\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].tenantId\",\"mergedName\":\"tenantId\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].kind\",\"mergedName\":\"kind\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].location\",\"mergedName\":\"location\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].resourceGroup\",\"mergedName\":\"resourceGroup\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].subscriptionId\",\"mergedName\":\"subscriptionId\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].managedBy\",\"mergedName\":\"managedBy\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].apiVersion\",\"mergedName\":\"apiVersion\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].sku\",\"mergedName\":\"sku\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].plan\",\"mergedName\":\"plan\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].properties\",\"mergedName\":\"properties\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].tags\",\"mergedName\":\"tags\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].identity\",\"mergedName\":\"identity\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].zones\",\"mergedName\":\"zones\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].extendedLocation\",\"mergedName\":\"extendedLocation\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].systemData\",\"mergedName\":\"systemData\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].ParentResourceResourceGroup\",\"mergedName\":\"ParentResourceResourceGroup\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].overallState\",\"mergedName\":\"overallState\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Name\",\"mergedName\":\"Name\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Namespace\",\"mergedName\":\"Namespace\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Metric\",\"mergedName\":\"Metric\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Metric ID\",\"mergedName\":\"Metric ID\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Aggregation\",\"mergedName\":\"Aggregation\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Segment Field\",\"mergedName\":\"Segment Field\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Segment\",\"mergedName\":\"Segment\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Timeline\",\"mergedName\":\"Timeline\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Subscription1\",\"mergedName\":\"Subscription1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Name1\",\"mergedName\":\"Name1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Namespace1\",\"mergedName\":\"Namespace1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Metric1\",\"mergedName\":\"Metric1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Metric ID1\",\"mergedName\":\"Metric ID1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Aggregation1\",\"mergedName\":\"Aggregation1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Segment Field1\",\"mergedName\":\"Segment Field1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Segment1\",\"mergedName\":\"Segment1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Value1\",\"mergedName\":\"Value1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Timeline1\",\"mergedName\":\"Timeline1\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Name2\",\"mergedName\":\"Name2\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Availability state\",\"mergedName\":\"Availability state\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Detailed status\",\"mergedName\":\"Detailed status\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Occurred time\",\"mergedName\":\"Occurred time\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Reason chronicity\",\"mergedName\":\"Reason chronicity\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Reason type\",\"mergedName\":\"Reason type\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Reported time\",\"mergedName\":\"Reported time\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Summary\",\"mergedName\":\"Summary\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Title\",\"mergedName\":\"Title\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Resource group\",\"mergedName\":\"Resource group\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"},{\"originalName\":\"[Union WebApp, Stoarge, KeyVault, Log analytics].Subscription2\",\"mergedName\":\"Subscription2\",\"fromId\":\"ccc1e49c-f7db-48c1-84e1-b74c930f1075\"}]}",
        "size": 2,
        "queryType": 7,
        "visualization": "graph",
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "overall",
            "formatter": 18,
            "formatOptions": {
              "thresholdsOptions": "icons",
              "thresholdsGrid": [
                {
                  "operator": "==",
                  "thresholdValue": "1",
                  "representation": "dot-green",
                  "text": ""
                },
                {
                  "operator": "==",
                  "thresholdValue": "2",
                  "representation": "dot-gray",
                  "text": ""
                },
                {
                  "operator": "==",
                  "thresholdValue": "0",
                  "representation": "dot-yellow",
                  "text": "[\"state\"], [\"status\"] [\"provisioningState\"]"
                },
                {
                  "operator": "Default",
                  "thresholdValue": null,
                  "representation": "dot-gray",
                  "text": ""
                }
              ]
            }
          },
          "centerContent": {
            "columnMatch": "id",
            "formatter": 13,
            "formatOptions": {
              "linkTarget": null,
              "showIcon": true
            }
          },
          "nodeIdField": "name",
          "sourceIdField": "name",
          "targetIdField": "ParentResource",
          "graphOrientation": 2,
          "showOrientationToggles": true,
          "nodeSize": null,
          "staticNodeSize": 100,
          "colorSettings": null,
          "hivesMargin": 5,
          "edgeColorSettings": null
        }
      },
      "name": "query - 11"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "WebApp TEST Availability",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "parameters": [
                {
                  "id": "f8f33651-e65e-4d49-a241-c436fdb5a317",
                  "version": "KqlParameterItem/1.0",
                  "name": "Subscriptions",
                  "type": 6,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "",
                  "crossComponentResources": [
                    "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386",
                    "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90",
                    "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209"
                  ],
                  "typeSettings": {
                    "limitSelectTo": 100,
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                },
                {
                  "id": "cac03137-59a9-4679-b605-15da3e5cffc0",
                  "version": "KqlParameterItem/1.0",
                  "name": "Resource_Group",
                  "label": "Resource Group",
                  "type": 2,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "Resources\r\n| where type =~ 'microsoft.insights/components'\r\n| summarize count() by resourceGroup, subscriptionId\r\n| order by count_ desc\r\n| extend Rank = row_number()\r\n| project value = resourceGroup, label = resourceGroup, selected = Rank <= 1",
                  "crossComponentResources": [
                    "{Subscriptions}"
                  ],
                  "typeSettings": {
                    "limitSelectTo": 100,
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                },
                {
                  "id": "cdf7ce36-3b35-48dd-9819-8cca7ed2783f",
                  "version": "KqlParameterItem/1.0",
                  "name": "Resources",
                  "label": "App Insights Resources",
                  "type": 5,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "Resources\r\n| where type =~ 'microsoft.insights/components'\r\n| where array_length(dynamic([{Resource_Group}])) == 0 or '*' in ({Resource_Group}) or  resourceGroup in~ ({Resource_Group})\r\n| extend lowerId = tolower(id)\r\n| join kind = leftouter (Resources\r\n| extend linkedResource = extract(@'\"hidden-link:([\\/\\w\\-\\.]+)\"', 1, tostring(tags)) \r\n| extend lowerLinked = tolower(linkedResource)\r\n| project id, lowerLinked, linkedResource) on $left.lowerId == $right.lowerLinked\r\n| project-away lowerLinked, lowerId\r\n| summarize count() by id, subscriptionId\r\n| project value = id, label = id, total = (count_ - 1)\r\n| order by total, value, label desc\r\n| project value, label",
                  "crossComponentResources": [
                    "{Subscriptions}"
                  ],
                  "typeSettings": {
                    "limitSelectTo": 100,
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                },
                {
                  "id": "62d55555-0eb2-436f-a5f5-41e8a23e30b4",
                  "version": "KqlParameterItem/1.0",
                  "name": "TimeRange",
                  "label": "Time Range",
                  "type": 4,
                  "description": "Define the overall time period you report on",
                  "isRequired": true,
                  "typeSettings": {
                    "selectableValues": [
                      {
                        "durationMs": 3600000
                      },
                      {
                        "durationMs": 43200000
                      },
                      {
                        "durationMs": 86400000
                      },
                      {
                        "durationMs": 172800000
                      },
                      {
                        "durationMs": 259200000
                      },
                      {
                        "durationMs": 604800000
                      }
                    ]
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "value": {
                    "durationMs": 259200000
                  }
                },
                {
                  "id": "396b1c40-17eb-4d0e-b096-7ecec6d1d6a2",
                  "version": "KqlParameterItem/1.0",
                  "name": "WebTests",
                  "label": "Web Tests",
                  "type": 2,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "availabilityResults\r\n| distinct name\r\n| order by name asc\r\n| extend Rank = row_number()\r\n| project value = name, label = name, selected = Rank <= 20",
                  "crossComponentResources": [
                    "{Resources}"
                  ],
                  "typeSettings": {
                    "limitSelectTo": 100,
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                },
                {
                  "id": "e2949e4b-a8fe-4cf7-8851-126634db4014",
                  "version": "KqlParameterItem/1.0",
                  "name": "Target_Nines",
                  "label": "Availability Target %",
                  "type": 1,
                  "isRequired": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "value": "99.5"
                }
              ],
              "style": "above",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources"
            },
            "customWidth": "50",
            "name": "Resouce Parameters"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "4246c165-8536-4223-b99c-62ad2195b0e9",
                  "version": "KqlParameterItem/1.0",
                  "name": "FailureThreshold",
                  "label": "Failure Threshold",
                  "type": 1,
                  "description": "Define how many location failures constitutes a service outage",
                  "isRequired": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "3"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "9154ec3c-66fe-4d7e-8438-5fb9240c686b",
                  "version": "KqlParameterItem/1.0",
                  "name": "OutageWindow",
                  "label": "Outage Window (minutes)",
                  "type": 1,
                  "isRequired": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "5"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "34499e9b-fba1-4285-959f-90b5546233da",
                  "version": "KqlParameterItem/1.0",
                  "name": "Maintenance_Period",
                  "label": "Maintenance Period",
                  "type": 2,
                  "description": "Select the time period your maintenance window occurs over",
                  "isRequired": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    { \"value\":3, \"label\":\"Never\", \"selected\":true},\r\n    { \"value\":1, \"label\":\"Weekly\"},\r\n    { \"value\":2, \"label\":\"Daily\" }\r\n]",
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "fe5ae029-1457-4462-880a-224e1fcb89bc",
                  "version": "KqlParameterItem/1.0",
                  "name": "Maintenance_Window",
                  "label": "Maintenance Window",
                  "type": 4,
                  "isRequired": true,
                  "typeSettings": {
                    "selectableValues": [],
                    "allowCustom": true
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "value": {
                    "durationMs": 2678400000,
                    "endTime": "2024-12-18T18:11:00.000Z"
                  }
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "customWidth": "50",
            "name": "Maintenance windows and Threshold"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "54d8cf31-91c4-41e3-ab92-763388c610ff",
                  "version": "KqlParameterItem/1.0",
                  "name": "ThresWindow",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "{Maintenance_Window:seconds}"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "5256496f-ee82-4cad-8911-f81d1113343e",
                  "version": "KqlParameterItem/1.0",
                  "name": "Threshold",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "ThresWindow",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "86400",
                        "resultValType": "static",
                        "resultVal": "Error"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "Success"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "customWidth": "50",
            "name": "Threswindow"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let adjustedMaintStart = case({Maintenance_Period} == 1, {Maintenance_Window:start} - startofweek({Maintenance_Window:start}), {Maintenance_Window:start} - startofday({Maintenance_Window:start})); //maintenance window variable dynamically set by parameters\r\nlet adjustedMaintEnd = case({Maintenance_Period} == 1, {Maintenance_Window:end} - startofweek({Maintenance_Window:end}), {Maintenance_Window:end} - startofday({Maintenance_Window:end})); //maintenance window variable dynamically set by parameters\r\navailabilityResults\r\n| where name in ({WebTests}) //web test filter\r\n| extend startLocalMaintenanceWindow = case({Maintenance_Period} == 1, startofweek(timestamp) + adjustedMaintStart, startofday(timestamp) + adjustedMaintStart) //beginning of maintenance filter\r\n| extend endLocalMaintenanceWindow = case({Maintenance_Period} == 1, startofweek(timestamp) + adjustedMaintEnd, startofday(timestamp) + adjustedMaintEnd)\r\n| where case({Maintenance_Period} == 1, timestamp !between (startLocalMaintenanceWindow .. endLocalMaintenanceWindow), \r\n            {Maintenance_Period} == 2, timestamp > endLocalMaintenanceWindow or timestamp < startLocalMaintenanceWindow, \r\n            timestamp == timestamp) //end of maintenance filter\r\n| project name, timestamp, startLocalMaintenanceWindow, endLocalMaintenanceWindow, duration, appName, location, success //start of actual query\r\n| project name, success, location, duration, appName, timestamp\r\n| where duration > 0\r\n| extend Outage = case(success contains '1', 0, 1)\r\n| summarize sum(Outage), avg(duration) by name, appName, bin(timestamp, {OutageWindow}m) //bin by outage window parameter\r\n| summarize ['Success Bins'] = todouble(countif(sum_Outage < toint({FailureThreshold}))), ['Fail Bins'] = todouble(countif(sum_Outage >= toint({FailureThreshold}))), ['Total Bins'] = todouble(count())\r\n| extend ['Web Test'] = 'Web Test', ['Test Success %'] = (['Success Bins'] / ['Total Bins'])*100 //calculate success percentage over chosen time period\r\n| extend ['Target 9s'] = iff(['Test Success %'] >= {Target_Nines}, 1, 0)\r\n| project ['Test Success %'], ['Target 9s'] //end of actual query",
              "size": 4,
              "timeContextFromParameter": "TimeRange",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "crossComponentResources": [
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-args-args-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-dva-ew1-ain01",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain01",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain02",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain03",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain04",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain11",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain12",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain13",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain14",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain15",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain16",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-sxna-sxna-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-dva-ew1-ain01",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-args-args-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-ppa-ew1-ain01",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain11",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain12",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain13",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain14",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain15",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain16",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain17",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain18",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-args-args-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-pra-en1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-args-args-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-pra-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain02",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain03",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain04",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain05",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-en1-ain15",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-en1-ain12",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-en1-ain11",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain02",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain03",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain04",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain05",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain06",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain07",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-ew1-ain11",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-ew1-ain12",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-ew1-ain15",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-sxna-sxna-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-ppa-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-sxna-sxna-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-pra-en1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-sxna-sxna-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-pra-ew1-ain01"
              ],
              "visualization": "tiles",
              "tileSettings": {
                "titleContent": {
                  "tooltipFormat": {}
                },
                "leftContent": {
                  "columnMatch": "Test Success %",
                  "formatter": 12,
                  "formatOptions": {
                    "min": 0,
                    "max": 100,
                    "palette": "redGreen"
                  },
                  "numberFormat": {
                    "unit": 1,
                    "options": {
                      "style": "decimal"
                    }
                  }
                },
                "secondaryContent": {
                  "columnMatch": "Target 9s",
                  "formatter": 18,
                  "formatOptions": {
                    "thresholdsOptions": "icons",
                    "thresholdsGrid": [
                      {
                        "operator": "==",
                        "thresholdValue": "1",
                        "representation": "success",
                        "text": "{1} On Target"
                      },
                      {
                        "operator": "==",
                        "thresholdValue": "0",
                        "representation": "warning",
                        "text": "{1} Under Target"
                      },
                      {
                        "operator": "Default",
                        "thresholdValue": null,
                        "representation": "success",
                        "text": "{0}{1}"
                      }
                    ]
                  }
                },
                "showBorder": false,
                "size": "auto"
              },
              "graphSettings": {
                "type": 0
              }
            },
            "name": "query - 12"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let adjustedMaintStart = case({Maintenance_Period} == 1, {Maintenance_Window:start} - startofweek({Maintenance_Window:start}), {Maintenance_Window:start} - startofday({Maintenance_Window:start})); //maintenance window variable dynamically set by parameters\r\nlet adjustedMaintEnd = case({Maintenance_Period} == 1, {Maintenance_Window:end} - startofweek({Maintenance_Window:end}), {Maintenance_Window:end} - startofday({Maintenance_Window:end})); //maintenance window variable dynamically set by parameters\r\navailabilityResults\r\n| where name in ({WebTests}) //web test filter\r\n| extend startLocalMaintenanceWindow = case({Maintenance_Period} == 1, startofweek(timestamp) + adjustedMaintStart, startofday(timestamp) + adjustedMaintStart) //beginning of maintenance filter\r\n| extend endLocalMaintenanceWindow = case({Maintenance_Period} == 1, startofweek(timestamp) + adjustedMaintEnd, startofday(timestamp) + adjustedMaintEnd)\r\n| where case({Maintenance_Period} == 1, timestamp !between (startLocalMaintenanceWindow .. endLocalMaintenanceWindow), \r\n            {Maintenance_Period} == 2, timestamp > endLocalMaintenanceWindow or timestamp < startLocalMaintenanceWindow, \r\n            timestamp == timestamp) //end of maintenance filter\r\n| project name, timestamp, duration, appName, location, success\r\n| project name, success, location, duration, appName, timestamp\r\n| where duration > 0\r\n| extend Outage = case(success contains '1', 0, 1)\r\n| summarize sum(Outage), avg(duration) by name, appName, bin(timestamp, {OutageWindow}m)\r\n| summarize ['Success Bins'] = todouble(countif(sum_Outage < toint({FailureThreshold}))), ['Fail Bins'] = todouble(countif(sum_Outage >= toint({FailureThreshold}))), ['Total Bins'] = todouble(count()), ['Max Duration'] = max(avg_duration), ['Avg Duration'] = avg(avg_duration) by name, appName\r\n| extend ['Web Test'] = 'Web Test', ['Test Success %'] = (['Success Bins'] / ['Total Bins'])*100\r\n| join kind=leftouter (\r\n    availabilityResults\r\n    | where name in ({WebTests})\r\n    | extend startLocalMaintenanceWindow = case({Maintenance_Period} == 1, startofweek(timestamp) + adjustedMaintStart, startofday(timestamp) + adjustedMaintStart)\r\n    | extend endLocalMaintenanceWindow = case({Maintenance_Period} == 1, startofweek(timestamp) + adjustedMaintEnd, startofday(timestamp) + adjustedMaintEnd)\r\n    | where case({Maintenance_Period} == 1, timestamp !between (startLocalMaintenanceWindow .. endLocalMaintenanceWindow), \r\n            {Maintenance_Period} == 2, timestamp > endLocalMaintenanceWindow or timestamp < startLocalMaintenanceWindow, \r\n            timestamp == timestamp)\r\n    | project name, timestamp, startLocalMaintenanceWindow, endLocalMaintenanceWindow, duration, appName, location, success\r\n    | extend Outage = case(success contains '1', 0, 1)\r\n    | project name, appName, timestamp, location, Outage\r\n    | summarize sum(Outage) by appName, name, bin(timestamp, {OutageWindow}m)\r\n    | sort by appName, name, timestamp\r\n    | where sum_Outage >= {FailureThreshold} //filter down to outages only\r\n    | extend OutageClassification = case(\r\n    name != prev(name), 'End of Outage', //bracket test name by final outage\r\n    name != next(name), 'Beginning of Outage', //bracket test name by initial outage time\r\n    name == next(name) and next(timestamp) == timestamp - {OutageWindow}m, 'Inner Outage', //if the previous record has a timestamp with the outage window difference then same outage\r\n    name == next(name) and next(timestamp) != timestamp - {OutageWindow}m, 'Beginning', //if the next timestamp is different by more than outagewindow then it is a new outage\r\n    'ELSE')\r\n    | extend OutageClassification = case(\r\n    name != prev(name) and name != next(name), 'Singular Outage',\r\n    OutageClassification == 'Beginning of Outage' and prev(timestamp) != timestamp + {OutageWindow}m, 'Singular Outage' ,//Single bin outage\r\n OutageClassification == 'Beginning' and prev(OutageClassification) == 'Beginning', 'Singular Outage',//Single bin outage\r\nOutageClassification == 'End of Outage' and next(timestamp) != timestamp - {OutageWindow}m, 'Singular Outage' //Single bin outage\r\n    ,OutageClassification)\r\n    | extend OutageClassification = case(\r\n    OutageClassification == 'Inner Outage' and prev(timestamp) != timestamp + {OutageWindow}m, 'Ending' //identify time shifts that signify end of outages\r\n    ,OutageClassification)\r\n    | where OutageClassification != 'Inner Outage' //filter out unnecessary values\r\n    | extend BeginningDate = case(\r\n    OutageClassification == 'End of Outage', next(timestamp),\r\n    OutageClassification == 'Ending', next(timestamp)\r\n    ,timestamp) //set the correct beginning date based on record\r\n    | extend EndingDate = case(\r\n    OutageClassification == 'Singular Outage', timestamp + {OutageWindow}m\r\n    ,timestamp) //consolidate records around the outage ending record\r\n    | where OutageClassification != 'Beginning of Outage' and OutageClassification != 'Beginning' //filter down to the full instances\r\n    | extend TotalOutageTime = EndingDate - BeginningDate\r\n    | summarize count() by name, appName\r\n    | project name, appName,['Outage Count'] = count_\r\n        ) on name, appName\r\n| extend ['Target 9s'] = iff(['Test Success %'] > {Target_Nines}, 1, 0)\r\n| extend ['Outage Count'] = iif(['Outage Count'] > 0, ['Outage Count'], 0)\r\n| project ['Web Test'], name, appName, ['Success Bins'], ['Fail Bins'], ['Total Bins'],['Avg Duration'],['Max Duration'],['Test Success %'],['Outage Count'], ['Target 9s']",
              "size": 0,
              "timeContextFromParameter": "TimeRange",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "crossComponentResources": [
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-args-args-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-dva-ew1-ain01",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain01",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain02",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain03",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-dva-ew1-ain04",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain11",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain12",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain13",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain14",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain15",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-plex-plex-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-dva-ew1-ain16",
                "/subscriptions/aa7bdf90-460d-4cc5-a986-537a5b8b2209/resourceGroups/z-aas-sxna-sxna-dva-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-dva-ew1-ain01",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-args-args-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-ppa-ew1-ain01",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain11",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain12",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain13",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain14",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain15",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain16",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain17",
                "/subscriptions/a346013a-af26-4351-aa00-02b988ce5c90/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-ppa-ew1-ain18",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-args-args-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-pra-en1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-args-args-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-args-args-pra-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain02",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain03",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain04",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-ppa-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-ppa-ew1-ain05",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-en1-ain11",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-en1-ain12",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-en1-ain15",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain02",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain03",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain04",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain05",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain06",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/microsoft.insights/components/z-aas-plex-plex-pra-ew1-ain07",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-ew1-ain11",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-sxna-sxna-ppa-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-ppa-ew1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-ew1-ain12",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-plex-plex-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-plex-plex-pra-ew1-ain15",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-sxna-sxna-pra-en1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-pra-en1-ain01",
                "/subscriptions/6619725a-f4df-4185-81cd-07e559bad386/resourceGroups/z-aas-sxna-sxna-pra-ew1-rgp01/providers/Microsoft.Insights/components/z-aas-sxna-sxna-pra-ew1-ain01"
              ],
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "Web Test",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "name",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "appName",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "Success Bins",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "Fail Bins",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "Total Bins",
                    "formatter": 22,
                    "formatOptions": {
                      "aggregation": "Sum",
                      "compositeBarSettings": {
                        "labelText": "[\"Success Bins\"] of [\"Total Bins\"] available",
                        "columnSettings": [
                          {
                            "columnName": "Success Bins",
                            "color": "green"
                          },
                          {
                            "columnName": "Fail Bins",
                            "color": "redBright"
                          }
                        ]
                      }
                    }
                  },
                  {
                    "columnMatch": "Avg Duration",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "palette": "turquoise",
                      "aggregation": "Average",
                      "customColumnWidthSetting": "120px"
                    },
                    "numberFormat": {
                      "unit": 23,
                      "options": {
                        "style": "decimal",
                        "maximumFractionDigits": 2
                      }
                    }
                  },
                  {
                    "columnMatch": "Max Duration",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "blue",
                      "aggregation": "Max",
                      "customColumnWidthSetting": "120px"
                    },
                    "numberFormat": {
                      "unit": 23,
                      "options": {
                        "style": "decimal",
                        "maximumFractionDigits": 2
                      }
                    }
                  },
                  {
                    "columnMatch": "Test Success %",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "redGreen",
                      "customColumnWidthSetting": "130px"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal",
                        "maximumFractionDigits": 2
                      }
                    }
                  },
                  {
                    "columnMatch": "Outage Count",
                    "formatter": 4,
                    "formatOptions": {
                      "min": 0,
                      "palette": "red",
                      "aggregation": "Sum",
                      "customColumnWidthSetting": "130px"
                    }
                  },
                  {
                    "columnMatch": "Target 9s",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": "==",
                          "thresholdValue": "1",
                          "representation": "success",
                          "text": "On Target"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "0",
                          "representation": "2",
                          "text": "Under Target"
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "success",
                          "text": "{0}{1}"
                        }
                      ],
                      "aggregation": "Min"
                    }
                  }
                ],
                "hierarchySettings": {
                  "treeType": 1,
                  "groupBy": [
                    "Web Test"
                  ],
                  "finalBy": "name"
                }
              }
            },
            "name": "query - 11"
          }
        ]
      },
      "name": "WebApp TEST Availability"
    }
  ],
  "fallbackResourceIds": [
    "azure monitor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}